define(["ajax","jquery","scroll","define","selector","contextmenu","lib/file","lib/url"],function(n,e,i,a,t,o,s,l){return{file:{lang:null,login:null,init:function(n,e){this.lang=n,this.login=e,this.fixSize()},fixSize:function(){var n=t.contentFileManager.height()-t.contentFileManagerLocation.height();t.contentFileManagerList.css({height:n+"px"}),i.emulator(a.contentFileManagerListSelector)},renderLocationPath:function(n){var e=[],i=[],a="/",o="",s="";0===n.indexOf("/")?(e.push("/"),n=n.substr(1)):a="\\",i=n.split(a);for(c=0;c<i.length;++c)e.push(i[c]);for(var c=0;c<e.length;++c){var r=e[c];o+=r,(0===c&&"\\"===a||c>0)&&(o+=a),s+='<li path="'+l.rawEncode(o)+'">',s+='<span class="label">'+r+"</span>",c+1<e.length&&(s+='<span class="separator"></span>'),s+="</li>"}t.contentFileManagerLocation.html(s)},renderDataList:function(n,e){this.renderLocationPath(n),t.contentFileManagerList.stop().css({display:"inline-block",opacity:0}),t.contentFileManagerListRender.find("div:only-child").each(function(){$(this).unbind("click contextmenu")});for(var i="",c=null,r=0;r<e.length;++r)(c=e[r]).is_directory?i+='<li name="'+c.name+'" is_directory="true" path="'+l.rawEncode(c.path)+'">':i+='<li name="'+c.name+'" is_directory="false" path="'+l.rawEncode(c.path)+'">',i+="<div>",i+='<p class="label">',c.is_directory?i+='<span class="icomoon icon-folder"></span>':i+='<span class="icomoon '+c.icon+'"></span>',i+='<span class="filename">'+c.name+"</span>",i+="</p>",i+='<p class="info">',0==c.is_directory&&(i+='<span class="size">'+s.parseSize(c.size)+"</span><span>,</span>"),i+='<span class="perms">'+c.perms+"</span>",i+="</p>",i+="</li>";t.contentFileManagerListRender.html(i).find("div:only-child").each(function(){var n=$(this);n.unbind("click contextmenu").bind("click",function(){var n=$(this);console.log("Click"),console.log(n)}).bind("contextmenu",function(e){o.show(n,{open:"Mở",copy:"Sao chép",move:"Di chuyển",delete:"Xóa",chmod:"Phân quyền",info:"Thông tin"},function(n,e){console.log(n),console.log(e)}),e.preventDefault()})}),t.contentFileManagerList.animate({opacity:1},a.time.animate_show)}}}});