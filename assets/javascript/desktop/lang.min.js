define(["ajax","alert","login"],function(t,e,n){return{main:null,datas:[],caches:[],init:function(r){var i=this;this.main=r,t.open({url:t.script.asset+"?lang",error:function(t,e){console.log(e)},success:function(t,r){i.datas=t,i.render(),e.init(),n.init(i)}})},render:function(){var t=this;$('*[lng*="."]').each(function(){var e=$(this),n=e.attr("lng");if("input"===e.get(0).tagName.toLowerCase()){var r=e.attr("type");"submit"==r||"radio"==r||"checkbox"==r?e.attr("value",t.get(n)):void 0!==e.attr("set")?e.attr("value",t.get(n)):e.attr("placeholder",t.get(n))}else e.html(t.get(n))})},get:function(t){if(null==t||t.length<=0||-1===t.indexOf("."))return console.log('Name "'+t+'" is null or not validate'),null;if(t.match(/^[a-zA-Z0-9_]+\s*\..+?$/i)){if(void 0!==this.caches[t])return this.caches[t];var e=t;0===e.indexOf(".")&&(e=e.substr(1));for(var n=e.split("."),r=this.datas,i=0;i<n.length;++i){var a=n[i].trim();if("object"!=typeof r||void 0===r[a])return console.log("Key "+t+" not found"),null;r=r[a]}if("object"==typeof r)return this.caches[t]=r;var o=arguments;if(r=this.matchesString(r,o),"object"==typeof o&&o.length>1){var l=o.length;if((l-1)%2==0)for(i=1;i<l;i+=2){var c=o[i],s=0;i+1<l&&(s=o[i+1]),r.replace&&(r=r.replace("{$"+c+"}",s))}return r}return this.caches[t]=r}return console.log("Key "+t+" not found"),null},matchesString:function(t,e){var n=this;return"string"!=typeof t||0==t.match(/\{(.+?)\}/i)?t:(t=t.replace(/#\{(.+?)\}/,function(t,r){return n.get(r.trim(),e)}),t=t.replace(/lng\{(.+?)\}/i,function(t,r){return n.get(r.trim(),e)}))}}});